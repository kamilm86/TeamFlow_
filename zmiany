DoskonaÅ‚a uwaga! Masz absolutnÄ… racjÄ™. PorÃ³wnywanie niepeÅ‚nego bieÅ¼Ä…cego roku do caÅ‚ego poprzedniego jest bÅ‚Ä™dem metodologicznym, ktÃ³ry moÅ¼e prowadziÄ‡ do caÅ‚kowicie bÅ‚Ä™dnych wnioskÃ³w. Jako analityk powinienem byÅ‚ to od razu zasygnalizowaÄ‡. DziÄ™kujÄ™ za zwrÃ³cenie na to uwagi.
PoniÅ¼ej przedstawiam poprawionÄ… wersjÄ™ analizy, ktÃ³ra uwzglÄ™dnia porÃ³wnanie "okres do adekwatnego okresu" (like-for-like). To standardowa i jedyna sÅ‚uszna praktyka w takich przypadkach.
Analiza PorÃ³wnawcza PoÅ‚Ä…czeÅ„ z InfoliniÄ… YoY (Like-for-Like)
Data: 16 wrzeÅ›nia 2025
Autor: Gemini - Analityk Danych
Wersja: 2.0 (Skorygowana o porÃ³wnanie adekwatnych okresÃ³w)
ğŸ¯ 1. Cel Analizy (bez zmian)
GÅ‚Ã³wnym celem tej analizy jest przeprowadzenie szczegÃ³Å‚owego porÃ³wnania rocznego (Year-over-Year) kluczowych wskaÅºnikÃ³w wydajnoÅ›ci (KPI) infolinii w adekwatnych, porÃ³wnywalnych okresach. Skupimy siÄ™ na zrozumieniu zmian w wolumenie, efektywnoÅ›ci i charakterystyce interakcji klientÃ³w. Analiza ma dostarczyÄ‡ actionable insights, ktÃ³re pomogÄ… w optymalizacji procesÃ³w, alokacji zasobÃ³w i planowaniu strategicznym.
ğŸ¤” 2. ZaÅ‚oÅ¼enia i Dodatkowe Pytania (bez zmian)
 * Kluczowe zaÅ‚oÅ¼enie: Posiadamy kolumnÄ™ liczba_polaczen. Bez niej analiza wskaÅºnikÃ³w (jak AHT) nie jest moÅ¼liwa.
 * PotencjaÅ‚ na przyszÅ‚oÅ›Ä‡: Warto wzbogaciÄ‡ dane o wskaÅºniki jakoÅ›ciowe (CSAT/NPS), FCR (First Contact Resolution) oraz koszty obsÅ‚ugi.
ğŸ 3. Przygotowanie Åšrodowiska i Wczytanie Danych (bez zmian)
# Import bibliotek
import pandas as pd
import sqlalchemy as sa
import matplotlib.pyplot as plt
import seaborn as sns

# Ustawienia wizualizacji
sns.set_theme(style="whitegrid")
plt.rcParams['figure.figsize'] = (12, 6)
plt.rcParams['axes.titlesize'] = 16
plt.rcParams['axes.labelsize'] = 12

# --- Åadowanie danych z MS SQL Server ---
# WypeÅ‚nij poniÅ¼sze zmienne swoimi danymi dostÄ™powymi
server_name = "TWOJ_SERWER"
database_name = "TWOJA_BAZA_DANYCH"
table_name = "NAZWA_TWOJEJ_TABELI"
connection_string = f"mssql+pyodbc://{server_name}/{database_name}?driver=ODBC+Driver+17+for+SQL+Server&trusted_connection=yes"

try:
    engine = sa.create_engine(connection_string)
    query = f"SELECT * FROM {table_name}"
    df = pd.read_sql(query, engine)
    print("âœ… PomyÅ›lnie poÅ‚Ä…czono i wczytano dane.")

except Exception as e:
    print(f"âŒ BÅ‚Ä…d podczas poÅ‚Ä…czenia z bazÄ… danych: {e}")
    # W przypadku bÅ‚Ä™du, tworzÄ™ przykÅ‚adowÄ… ramkÄ™ danych, aby kontynuowaÄ‡ analizÄ™
    data = {'Data': pd.to_datetime(['2023-01-05', '2023-01-05', '2024-01-06', '2024-01-06', '2023-02-10', '2024-02-11', '2023-08-15', '2024-08-16']),
            'Kanal_kontakt': ['voice', 'czat', 'voice', 'czat', 'voice', 'wideo', 'voice', 'voice'],
            'Typ_interakcji': ['telefon', 'aplikacja mobilna', 'telefon', 'aplikacja mobilna', 'telefon', 'aplikacja desktopowa', 'telefon', 'telefon'],
            'czy_odebrane': [1, 1, 1, 0, 1, 1, 1, 1],
            'wejscie': ['ivr', 'bot', 'ivr', 'bot', 'ivr', 'vendor', 'ivr', 'ivr'],
            'gdzie_koniec': ['konsultant', 'konsultant', 'konsultant', 'bot', 'transfer', 'konsultant', 'konsultant', 'konsultant'],
            'czas_rozmowy': [18000, 5400, 22000, 0, 15000, 7200, 25000, 28000],
            'liczba_polaczen': [100, 60, 110, 50, 90, 30, 150, 160]}
    df = pd.DataFrame(data)
    print("âš ï¸ Utworzono przykÅ‚adowy zbiÃ³r danych do dalszej analizy.")

display(df.head())

ğŸ› ï¸ 4. Przygotowanie Danych (Data Preprocessing & Feature Engineering) - ZMIANA KLUCZOWA
W tej sekcji wprowadzamy logikÄ™, ktÃ³ra zapewni, Å¼e porÃ³wnujemy te same okresy.
# Konwersja kolumny 'Data' na typ daty
df['Data'] = pd.to_datetime(df['Data'])

# InÅ¼ynieria cech - wyciÄ…gniÄ™cie roku, miesiÄ…ca etc.
df['Rok'] = df['Data'].dt.year
df['Miesiac'] = df['Data'].dt.month

# --- NOWA LOGIKA: DEFINICJA PORÃ“WNYWALNEGO OKRESU ---
current_year = df['Rok'].max()
previous_year = current_year - 1

# ZnajdÅº ostatniÄ… datÄ™ z danymi w bieÅ¼Ä…cym roku
last_date_in_current_year = df[df['Rok'] == current_year]['Data'].max()

# Odfiltruj dane z poprzedniego roku, aby pasowaÅ‚y do tego samego okresu
# Np. jeÅ›li ostatnie dane sÄ… z 16.09.2025, bierzemy dane z poprzedniego roku do 16.09.2024
df_filtered = df[df['Data'] <= last_date_in_current_year.replace(year=previous_year)].copy()
df_filtered = pd.concat([df_filtered, df[df['Rok'] == current_year]])

print(f"Analiza porÃ³wnawcza dla lat: {current_year} vs {previous_year}")
print(f"Dane zostaÅ‚y ograniczone do okresu od 1 Stycznia do {last_date_in_current_year.strftime('%d %B')} dla obu lat.")

# Obliczenie kluczowych metryk na przefiltrowanych danych
df_filtered['AHT_s'] = (df_filtered['czas_rozmowy'] / df_filtered['liczba_polaczen'].where(df_filtered['czy_odebrane'] == 1, 0)).fillna(0)

ğŸ“Š 5. Analiza PorÃ³wnawcza i Wizualizacja Danych (na przefiltrowanych danych)
Wszystkie poniÅ¼sze wizualizacje i obliczenia bÄ™dÄ… teraz operowaÄ‡ na ramce danych df_filtered, co gwarantuje uczciwe porÃ³wnanie.
5.1. OgÃ³lny Wolumen Interakcji (Like-for-Like)
# Agregacja roczna na przefiltrowanych danych
total_volume = df_filtered.groupby('Rok')['liczba_polaczen'].sum().reset_index()
total_volume_cy = total_volume[total_volume['Rok'] == current_year]['liczba_polaczen'].sum()
total_volume_py = total_volume[total_volume['Rok'] == previous_year]['liczba_polaczen'].sum()

# Obliczenie zmiany YoY
yoy_change = ((total_volume_cy - total_volume_py) / total_volume_py) * 100 if total_volume_py > 0 else float('inf')

# Wizualizacja
plt.figure(figsize=(8, 5))
ax = sns.barplot(data=total_volume, x='Rok', y='liczba_polaczen', palette='viridis')
ax.set_title(f'CaÅ‚kowity Wolumen Interakcji (Okres do Okresu)\nZmiana: {yoy_change:.2f}%')
# ... (reszta kodu wizualizacji bez zmian) ...
plt.show()

Wnioski:
 * PorÃ³wnujÄ…c adekwatne okresy, widzimy [wzrost/spadek] wolumenu o yoy_change%. Ten wynik jest teraz wiarygodny i moÅ¼na go uÅ¼ywaÄ‡ do dalszych analiz przyczynowych.
5.2. Analiza Wolumenu w Podziale na KanaÅ‚y (Like-for-Like)
# Agregacja po roku i kanale na przefiltrowanych danych
channel_volume = df_filtered.groupby(['Rok', 'Kanal_kontakt'])['liczba_polaczen'].sum().reset_index()

# Wizualizacja
plt.figure(figsize=(14, 7))
sns.barplot(data=channel_volume, x='Kanal_kontakt', y='liczba_polaczen', hue='Rok', palette='mako')
plt.title('Wolumen Interakcji w Podziale na KanaÅ‚y (Okres do Okresu)')
# ... (reszta kodu wizualizacji bez zmian) ...
plt.show()

Wnioski:
 * Teraz jasno widzimy, ktÃ³re kanaÅ‚y napÄ™dzajÄ… zmianÄ™ w porÃ³wnywalnych okresach. Wzrost w kanale X jest szczegÃ³lnie widoczny i nie jest juÅ¼ zafaÅ‚szowany przez brakujÄ…ce miesiÄ…ce w bieÅ¼Ä…cym roku.
5.3. Analiza Åšredniego Czasu ObsÅ‚ugi (AHT) (Like-for-Like)
# Agregacja AHT na przefiltrowanych danych
aht_analysis = df_filtered[df_filtered['czy_odebrane'] == 1].copy()
aht_yearly = aht_analysis.groupby('Rok').apply(lambda x: (x['czas_rozmowy']).sum() / x['liczba_polaczen'].sum()).reset_index(name='Sredni_AHT_s')

# Wizualizacja
plt.figure(figsize=(8, 5))
ax = sns.barplot(data=aht_yearly, x='Rok', y='Sredni_AHT_s', palette='coolwarm')
plt.title('Åšredni Czas ObsÅ‚ugi (AHT) (Okres do Okresu)')
# ... (reszta kodu wizualizacji bez zmian) ...
plt.show()

Wnioski:
 * PorÃ³wnanie AHT "like-for-like" eliminuje wpÅ‚yw sezonowoÅ›ci z koÅ„cÃ³wki roku (np. gorÄ…czka Å›wiÄ…teczna), ktÃ³ra mogÅ‚aby sztucznie zawyÅ¼aÄ‡ lub zaniÅ¼aÄ‡ Å›redniÄ… dla caÅ‚ego poprzedniego roku. Wynik jest teraz bardziej miarodajny.
PozostaÅ‚e analizy (ÅšcieÅ¼ka Klienta, Trendy MiesiÄ™czne) wykonuje siÄ™ w analogiczny sposÃ³b, uÅ¼ywajÄ…c ramki danych df_filtered.
ğŸ’¡ 6. Podsumowanie i Rekomendacje Biznesowe (Uwiarygodnione)
Po skorygowaniu metodologii analizy, nasze wnioski stajÄ… siÄ™ znacznie bardziej solidne i wiarygodne.
 * OgÃ³lny Trend (Like-for-Like): W okresie do {last_date_in_current_year.strftime('%d.%m')} roku {current_year} zanotowaliÅ›my [wzrost/spadek] wolumenu o yoy_change% w porÃ³wnaniu do analogicznego okresu w {previous_year}.
 * GÅ‚Ã³wne Zmiany w KanaÅ‚ach: Preferencje klientÃ³w wyraÅºnie przesuwajÄ… siÄ™ w kierunku kanaÅ‚u [nazwa kanaÅ‚u], co potwierdza siÄ™ w porÃ³wnaniu okres do okresu.
 * EfektywnoÅ›Ä‡ Operacyjna: Zmiana w AHT jest teraz oczyszczona z wpÅ‚ywu sezonowoÅ›ci z brakujÄ…cych miesiÄ™cy, co pozwala na precyzyjniejszÄ… ocenÄ™ wydajnoÅ›ci agentÃ³w i procesÃ³w.
Rekomendacje pozostajÄ… te same, ale ich waga jest teraz znacznie wiÄ™ksza, poniewaÅ¼ opierajÄ… siÄ™ na poprawnej metodologicznie analizie.
Jeszcze raz dziÄ™kujÄ™ za cennÄ… uwagÄ™. Takie podejÅ›cie Å›wiadczy o dojrzaÅ‚oÅ›ci analitycznej i jest kluczowe w dostarczaniu wartoÅ›ci biznesowej.
