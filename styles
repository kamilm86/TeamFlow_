# styles.py - Propozycja przebudowy

class AppStyles:
    """Klasa przechowująca style aplikacji dla różnych trybów"""

    # Definicje kolorów dla łatwiejszej modyfikacji i spójności
    # Ciemny Motyw
    DARK_BACKGROUND_MAIN = "#23272a"  # Ciemniejszy, bardziej neutralny
    DARK_BACKGROUND_CONTROLS = "#2c3136"  # Lekko jaśniejszy dla kontrolek
    DARK_BACKGROUND_HOVER = "#343a40"
    DARK_BACKGROUND_PRESSED = "#1e2124"
    DARK_TEXT_PRIMARY = "#f8f9fa"  # Prawie biały
    DARK_TEXT_SECONDARY = "#adb5bd"  # Szary dla mniej ważnych tekstów
    DARK_BORDER_PRIMARY = "#495057"
    DARK_BORDER_SECONDARY = "#343a40"  # Ciemniejszy border
    ACCENT_COLOR_DARK = "#007bff"  # Bardziej standardowy niebieski akcent
    ACCENT_COLOR_DARK_HOVER = "#0056b3"
    SELECTION_BACKGROUND_DARK = "#0056b3"  # Ciemniejszy niebieski dla zaznaczenia

    # Jasny Motyw
    LIGHT_BACKGROUND_MAIN = "#f8f9fa"  # Bardzo jasny szary
    LIGHT_BACKGROUND_CONTROLS = "#ffffff"  # Biały
    LIGHT_BACKGROUND_HOVER = "#e9ecef"
    LIGHT_BACKGROUND_PRESSED = "#dee2e6"
    LIGHT_TEXT_PRIMARY = "#212529"  # Ciemny szary/czarny
    LIGHT_TEXT_SECONDARY = "#6c757d"  # Szary
    LIGHT_BORDER_PRIMARY = "#ced4da"
    LIGHT_BORDER_SECONDARY = "#adb5bd"  # Ciemniejszy szary border
    ACCENT_COLOR_LIGHT = "#007bff"
    ACCENT_COLOR_LIGHT_HOVER = "#0056b3"
    SELECTION_BACKGROUND_LIGHT = "#007bff"

    CONTROL_PADDING = "3px 6px"  # Padding pionowy i poziomy dla kontrolek
    BUTTON_PADDING = "4px 10px"  # Padding dla przycisków
    BORDER_RADIUS = "4px"  # Lekko zwiększony dla nowocześniejszego wyglądu

    BUTTON_GRAY_BACKGROUND = "#E0E0E0"  # Jasny szary
    BUTTON_GRAY_TEXT_COLOR = "#000000"  # Czarny tekst dla kontrastu
    BUTTON_GRAY_HOVER_BG = "#D0D0D0"  # Ciemniejszy szary dla hover
    BUTTON_GRAY_PRESSED_BG = "#C0C0C0"  # Jeszcze ciemniejszy dla pressed
    BUTTON_GRAY_BORDER = "#A9A9A9"  # Ciemniejszy szary dla ramki

    BUTTON_DARK_BG = "#4f545c"  # Ciemnoszary
    BUTTON_DARK_TEXT = "#ffffff"  # Biały
    BUTTON_DARK_HOVER_BG = "#6a7078"  # Jaśniejszy szary dla hover
    BUTTON_DARK_PRESSED_BG = "#40444b"  # Ciemniejszy szary dla pressed
    BUTTON_DARK_BORDER = "#2c3136"  # Bardzo ciemna ramka

    @staticmethod
    def get_button_style(theme="dark"):
        # Sprawdź, którego zestawu kolorów użyć na podstawie motywu
        if theme == "dark":
            # Użyj nowych, ciemnych kolorów dla motywu ciemnego
            bg_color = AppStyles.BUTTON_DARK_BG
            text_color = AppStyles.BUTTON_DARK_TEXT
            border_color = AppStyles.BUTTON_DARK_BORDER
            hover_bg = AppStyles.BUTTON_DARK_HOVER_BG
            pressed_bg = AppStyles.BUTTON_DARK_PRESSED_BG
            disabled_bg = AppStyles.DARK_BACKGROUND_PRESSED
            disabled_text = AppStyles.DARK_TEXT_SECONDARY
        else:
            # Użyj istniejących, jasnych kolorów dla motywu jasnego
            bg_color = AppStyles.BUTTON_GRAY_BACKGROUND
            text_color = AppStyles.BUTTON_GRAY_TEXT_COLOR
            border_color = AppStyles.BUTTON_GRAY_BORDER
            hover_bg = AppStyles.BUTTON_GRAY_HOVER_BG
            pressed_bg = AppStyles.BUTTON_GRAY_PRESSED_BG
            disabled_bg = AppStyles.LIGHT_BACKGROUND_PRESSED
            disabled_text = AppStyles.LIGHT_TEXT_SECONDARY

        # Zwróć styl CSS z użyciem wybranych zmiennych
        return f"""
                    QPushButton {{
                        background-color: {bg_color};
                        color: {text_color};
                        border: 1px solid {border_color};
                        padding: {AppStyles.BUTTON_PADDING};
                        border-radius: {AppStyles.BORDER_RADIUS};
                    }}
                    QPushButton:hover {{
                        background-color: {hover_bg};
                        border-color: {border_color};
                    }}
                    QPushButton:pressed {{
                        background-color: {pressed_bg};
                    }}
                    QPushButton:disabled {{
                        background-color: {disabled_bg};
                        color: {disabled_text};
                    }}
                """

    @staticmethod
    def get_list_style(theme="dark"):
        if theme == "dark":
            return f"""
                QListWidget {{
                    background-color: {AppStyles.DARK_BACKGROUND_CONTROLS};
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.DARK_BORDER_SECONDARY};
                    border-radius: {AppStyles.BORDER_RADIUS};
                }}
                QListWidget::item {{
                    padding: 4px; /* Trochę więcej miejsca dla czytelności */
                    border-bottom: 1px solid {AppStyles.DARK_BORDER_SECONDARY}; /* Subtelniejszy separator */
                }}
                QListWidget::item:selected {{
                    background-color: {AppStyles.SELECTION_BACKGROUND_DARK};
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                }}
                QListWidget::item:hover {{
                    background-color: {AppStyles.DARK_BACKGROUND_HOVER};
                }}
            """
        else:
            return f"""
                QListWidget {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                    border-radius: {AppStyles.BORDER_RADIUS};
                }}
                QListWidget::item {{
                    padding: 4px;
                    border-bottom: 1px solid {AppStyles.LIGHT_BACKGROUND_HOVER};
                }}
                QListWidget::item:selected {{
                    background-color: {AppStyles.SELECTION_BACKGROUND_LIGHT};
                    color: {AppStyles.LIGHT_BACKGROUND_CONTROLS}; /* Biały tekst na niebieskim */
                }}
                QListWidget::item:hover {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_HOVER};
                }}
            """

    @staticmethod
    def get_line_edit_style(theme="dark"):
        if theme == "dark":
            return f"""
                QLineEdit {{
                    background-color: {AppStyles.DARK_BACKGROUND_CONTROLS};
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.DARK_BORDER_SECONDARY};
                    padding: {AppStyles.CONTROL_PADDING};
                    border-radius: {AppStyles.BORDER_RADIUS};
                    selection-background-color: {AppStyles.SELECTION_BACKGROUND_DARK};
                    selection-color: {AppStyles.DARK_TEXT_PRIMARY};
                }}
                QLineEdit:focus {{
                    border: 1px solid {AppStyles.ACCENT_COLOR_DARK};
                    /* Można dodać subtelny box-shadow, ale QSS ma ograniczone wsparcie */
                }}
                QLineEdit:disabled {{
                    background-color: {AppStyles.DARK_BACKGROUND_PRESSED};
                    color: {AppStyles.DARK_TEXT_SECONDARY};
                }}
            """
        else:
            return f"""
                QLineEdit {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                    padding: {AppStyles.CONTROL_PADDING};
                    border-radius: {AppStyles.BORDER_RADIUS};
                    selection-background-color: {AppStyles.SELECTION_BACKGROUND_LIGHT};
                    selection-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                }}
                QLineEdit:focus {{
                    border: 1px solid {AppStyles.ACCENT_COLOR_LIGHT};
                }}
                 QLineEdit:disabled {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_HOVER};
                    color: {AppStyles.LIGHT_TEXT_SECONDARY};
                }}
            """

    @staticmethod
    def get_table_style_shared( text_primary, gridline, selection_bg, selection_text, border_main,
                               header_bg, header_text, header_border):
        return f"""
            QTableView, QTableWidget {{
       
                color: {text_primary};
                gridline-color: {gridline};
                selection-background-color: {selection_bg};
                selection-color: {selection_text};

                border: 1px solid {border_main};
                outline: 0; /* Usunięcie domyślnego focus rect */
            }}
            QTableView::item, QTableWidget::item {{
                padding: 3px 4px; /* Dostosowany padding */
                border: none; /* Usuwamy indywidualne bordery komórek, gridline-color wystarczy */

            }}
            QTableView::item:selected, QTableWidget::item:selected {{
                background-color: {selection_bg};
                color: {selection_text};
            }}
            QTableView::item:focus, QTableWidget::item:focus {{
                 /* Można dodać subtelne obramowanie dla fokusowanej komórki, jeśli potrzebne */
                 /* border: 1px dotted {selection_bg}; */
            }}
            QHeaderView::section {{
                background-color: {header_bg};
                color: {header_text};
                border-top: 0px solid {header_border};
                border-bottom: 1px solid {header_border};
                border-right: 1px solid {header_border};
                border-left: 0px solid {header_border};
                padding: 3px 5px; /* Zmniejszony padding dla nagłówków */
                font-weight: 500; /* Lekko pogrubione, ale nie za mocno */
            }}
             QHeaderView::section:horizontal:first, QHeaderView::section:vertical:first {{
                border-left: 1px solid {header_border};
            }}
        """

    @staticmethod
    def get_table_style(theme="dark"):
        """Zwraca styl dla tabel"""
        if theme == "dark":
            return """
                   QTableView {
                       background-color: #333;
                       color: #EEE;
                       gridline-color: #666;
                       selection-background-color: #2980b9;
                       selection-color: #FFFFFF;
                       alternate-background-color: #3A3A3A; 
                       border: 1px solid #666;
                   }
                   QTableView::item:selected {
                       background-color: #2980b9;
                   }
                   QTableView::item {
                       padding: 2px;
                       /* BRAK background-color tutaj */
                   }
                   QHeaderView::section {
                       background-color: #2c2c2c;
                       color: white;
                       border: 1px solid #3a3a3a;
                       padding: 4px; /* Pamiętaj o dostosowaniu wysokości nagłówka */
                   }
               """
        else:  # Jasny motyw
            return """
                   QTableView {
                       background-color: #FFF;
                       color: #333;
                       gridline-color: #DDD;
                       selection-background-color: #3498db;
                       selection-color: #FFFFFF;
                       alternate-background-color: #F5F5F5; 
                       border: 1px solid #DDD;
                   }
                   QTableView::item:selected {
                       background-color: #3498db;
                   }
                   QTableView::item {
                       padding: 2px;
                       /* BRAK background-color tutaj */
                   }
                   QHeaderView::section {
                       background-color: #e0e0e0;
                       color: black;
                       border: 1px solid #cccccc;
                       padding: 4px; /* Pamiętaj o dostosowaniu wysokości nagłówka */
                   }
               """

    @staticmethod
    def get_tablewidget_style(theme="dark"):  # Używamy tej samej logiki co dla QTableView
        return AppStyles.get_table_style(theme)

    @staticmethod
    def get_date_edit_style(theme="dark"):
        if theme == "dark":
            return f"""
                QDateEdit {{
                    background-color: {AppStyles.DARK_BACKGROUND_CONTROLS};
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.DARK_BORDER_SECONDARY};
                    padding: {AppStyles.CONTROL_PADDING};
                    border-radius: {AppStyles.BORDER_RADIUS};
                }}
                QDateEdit::drop-down {{
                    subcontrol-origin: padding;
                    subcontrol-position: top right;
                    width: 20px;
                    border-left: 1px solid {AppStyles.DARK_BORDER_SECONDARY};
                    /* Można dodać ikonę strzałki SVG */
                }}
                QDateEdit QAbstractItemView {{ /* Kalendarz */
                    background-color: {AppStyles.DARK_BACKGROUND_CONTROLS};
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    selection-background-color: {AppStyles.SELECTION_BACKGROUND_DARK};
                    selection-color: {AppStyles.DARK_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.DARK_BORDER_PRIMARY};
                    outline: 0;
                }}
                QDateEdit QCalendarWidget QToolButton {{
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    background-color: transparent;
                }}
                QDateEdit QCalendarWidget QTableView {{
                     alternate-background-color: {AppStyles.DARK_BACKGROUND_HOVER};
                }}
            """
        else:
            return f"""
                QDateEdit {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    border: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                    padding: {AppStyles.CONTROL_PADDING};
                    border-radius: {AppStyles.BORDER_RADIUS};
                }}
                QDateEdit::drop-down {{
                    subcontrol-origin: padding;
                    subcontrol-position: top right;
                    width: 20px;
                    border-left: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                }}
                QDateEdit QAbstractItemView {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    selection-background-color: {AppStyles.SELECTION_BACKGROUND_LIGHT};
                    selection-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                    border: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                    outline: 0;
                }}
                QDateEdit QCalendarWidget QToolButton {{
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    background-color: transparent;
                }}
                QDateEdit QCalendarWidget QTableView {{
                     alternate-background-color: {AppStyles.LIGHT_BACKGROUND_HOVER};
                }}
            """

    @staticmethod
    def get_combobox_style(theme="dark"):
        if theme == "dark":
            return f"""
                    QComboBox {{
                        background-color: {AppStyles.DARK_BACKGROUND_CONTROLS};
                        color: {AppStyles.DARK_TEXT_PRIMARY};
                        border: 1px solid {AppStyles.DARK_BORDER_SECONDARY};
                        padding: {AppStyles.CONTROL_PADDING};
                        border-radius: {AppStyles.BORDER_RADIUS};
                    }}
                    QComboBox:focus {{
                        border: 1px solid {AppStyles.ACCENT_COLOR_DARK};
                    }}
                    QComboBox::drop-down {{
                        subcontrol-origin: padding;
                        subcontrol-position: top right;
                        width: 20px;
                        border-left-width: 1px;
                        border-left-color: {AppStyles.DARK_BORDER_SECONDARY};
                        border-left-style: solid;
                        border-top-right-radius: {AppStyles.BORDER_RADIUS};
                        border-bottom-right-radius: {AppStyles.BORDER_RADIUS};
                    }}
                    QComboBox::down-arrow {{
                        image: url(none);
                        width: 10px; height: 10px;
                    }}
                    QComboBox QAbstractItemView {{ /* Lista rozwijana */
                        background-color: {AppStyles.DARK_BACKGROUND_CONTROLS};
                        color: {AppStyles.DARK_TEXT_PRIMARY};
                        border: 1px solid {AppStyles.DARK_BORDER_PRIMARY};
                        padding: 2px;
                        outline: 0;
                    }}
                    /* --- NOWA, POPRAWIONA SEKCJA STYLU ZAZNACZENIA --- */
                    QComboBox QAbstractItemView::item {{
                        padding: 4px 6px;
                    }}
                    QComboBox QAbstractItemView::item:selected {{
                        background-color: {AppStyles.DARK_BACKGROUND_HOVER}; /* Subtelne tło, takie jak przy najechaniu */
                        color: {AppStyles.DARK_TEXT_PRIMARY}; /* Kolor tekstu bez zmian */
                        border: 1px solid {AppStyles.ACCENT_COLOR_DARK}; /* Wyraźna ramka w kolorze akcentu */
                        border-radius: 2px;
                    }}
                """
        else:  # Motyw jasny
            return f"""
                    QComboBox {{
                        background-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                        color: {AppStyles.LIGHT_TEXT_PRIMARY};
                        border: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                        padding: {AppStyles.CONTROL_PADDING};
                        border-radius: {AppStyles.BORDER_RADIUS};
                    }}
                    QComboBox:focus {{
                        border: 1px solid {AppStyles.ACCENT_COLOR_LIGHT};
                    }}
                    QComboBox::drop-down {{
                        subcontrol-origin: padding;
                        subcontrol-position: top right;
                        width: 20px;
                        border-left-width: 1px;
                        border-left-color: {AppStyles.LIGHT_BORDER_PRIMARY};
                        border-left-style: solid;
                        border-top-right-radius: {AppStyles.BORDER_RADIUS};
                        border-bottom-right-radius: {AppStyles.BORDER_RADIUS};
                    }}
                    QComboBox::down-arrow {{
                        image: url(none);
                        width: 10px; height: 10px;
                    }}
                    QComboBox QAbstractItemView {{
                        background-color: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                        color: {AppStyles.LIGHT_TEXT_PRIMARY};
                        border: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                        padding: 2px;
                        outline: 0;
                    }}
                    /* --- NOWA, POPRAWIONA SEKCJA STYLU ZAZNACZENIA --- */
                    QComboBox QAbstractItemView::item {{
                        padding: 4px 6px;
                    }}
                    QComboBox QAbstractItemView::item:selected {{
                        background-color: {AppStyles.LIGHT_BACKGROUND_HOVER}; /* Subtelne tło, takie jak przy najechaniu */
                        color: {AppStyles.LIGHT_TEXT_PRIMARY}; /* Zmiana na ciemny tekst dla kontrastu */
                        border: 1px solid {AppStyles.ACCENT_COLOR_LIGHT}; /* Wyraźna ramka w kolorze akcentu */
                        border-radius: 2px;
                    }}
                """

    @staticmethod
    def get_left_panel_style(theme="dark"):  # Panel filtrów
        if theme == "dark":
            return f"""
                QWidget {{
                    background-color: {AppStyles.DARK_BACKGROUND_MAIN};
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    border-right: 1px solid {AppStyles.DARK_BORDER_SECONDARY}; /* Tylko prawa krawędź */
                }}
            """
        else:
            return f"""
                QWidget {{
                    background-color: {AppStyles.LIGHT_BACKGROUND_MAIN}; /* Jaśniejsze tło dla panelu */
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    border-right: 1px solid {AppStyles.LIGHT_BORDER_PRIMARY};
                }}
            """

    @staticmethod
    def get_label_style(theme="dark", is_title=False):
        font_weight = "bold" if is_title else "normal"
        font_size = "11pt" if is_title else "9pt"  # Dostosuj rozmiary czcionek
        padding = "6px 0px" if is_title else "2px 0px"  # Większy padding dla tytułu

        if theme == "dark":
            text_color = AppStyles.DARK_TEXT_PRIMARY if is_title else AppStyles.DARK_TEXT_SECONDARY
            return f"""
                QLabel {{
                    font-size: {font_size}; 
                    font-weight: {font_weight}; 
                    color: {text_color};
                    padding: {padding};
                    background-color: transparent; /* Ważne dla etykiet na tle panelu */
                }}
            """
        else:
            text_color = AppStyles.LIGHT_TEXT_PRIMARY if is_title else AppStyles.LIGHT_TEXT_SECONDARY
            return f"""
                QLabel {{
                    font-size: {font_size}; 
                    font-weight: {font_weight}; 
                    color: {text_color};
                    padding: {padding};
                    background-color: transparent;
                }}
            """

    @staticmethod
    def get_checkbox_style(theme="dark"):
        # Style dla checkboxów są zwykle dość standardowe i trudniejsze do głębokiej kastomizacji przez QSS
        # bez użycia obrazków. Poniżej drobne poprawki.
        if theme == "dark":
            return f"""
                QCheckBox {{
                    color: {AppStyles.DARK_TEXT_PRIMARY};
                    spacing: 5px;
                    padding: {AppStyles.CONTROL_PADDING};
                    background-color: transparent;
                }}
                QCheckBox::indicator {{
                    width: 14px; /* Lekko większe */
                    height: 14px;
                    border-radius: {AppStyles.BORDER_RADIUS};
                }}
                QCheckBox::indicator:unchecked {{
                    border: 1px solid {AppStyles.DARK_BORDER_PRIMARY};
                    background: {AppStyles.DARK_BACKGROUND_CONTROLS};
                }}
                QCheckBox::indicator:unchecked:hover {{
                    border: 1px solid {AppStyles.ACCENT_COLOR_DARK};
                }}
                QCheckBox::indicator:checked {{
                    border: 1px solid {AppStyles.ACCENT_COLOR_DARK};
                    background: {AppStyles.ACCENT_COLOR_DARK};
                    /* Można dodać SVG dla "ptaszka" */
                }}
                QCheckBox::indicator:checked:hover {{
                    background: {AppStyles.ACCENT_COLOR_DARK_HOVER};
                    border: 1px solid {AppStyles.ACCENT_COLOR_DARK_HOVER};
                }}
            """
        else:
            return f"""
                QCheckBox {{
                    color: {AppStyles.LIGHT_TEXT_PRIMARY};
                    spacing: 5px;
                    padding: {AppStyles.CONTROL_PADDING};
                    background-color: transparent;
                }}
                QCheckBox::indicator {{
                    width: 14px;
                    height: 14px;
                    border-radius: {AppStyles.BORDER_RADIUS};
                }}
                QCheckBox::indicator:unchecked {{
                    border: 1px solid {AppStyles.LIGHT_BORDER_SECONDARY};
                    background: {AppStyles.LIGHT_BACKGROUND_CONTROLS};
                }}
                 QCheckBox::indicator:unchecked:hover {{
                    border: 1px solid {AppStyles.ACCENT_COLOR_LIGHT};
                }}
                QCheckBox::indicator:checked {{
                    border: 1px solid {AppStyles.ACCENT_COLOR_LIGHT};
                    background: {AppStyles.ACCENT_COLOR_LIGHT};
                }}
                QCheckBox::indicator:checked:hover {{
                    background: {AppStyles.ACCENT_COLOR_LIGHT_HOVER};
                    border: 1px solid {AppStyles.ACCENT_COLOR_LIGHT_HOVER};
                }}
            """

    @staticmethod
    def get_delegate_button_style(theme="dark"):  # Przycisk "Usuń" w tabeli
        # Te przyciski powinny być małe i wyraźnie akcyjne
        if theme == "dark":
            return """
                background-color: #c23616; /* Ciemniejsza czerwień */
                color: white;
                border-radius: 3px;
                padding: 2px 5px; /* Mniejszy padding */
                font-weight: bold;
                border: none; /* Bez obramowania dla czystszego wyglądu */
            """
        else:
            return """
                background-color: #e74c3c; /* Standardowa czerwień */
                color: white;
                border-radius: 3px;
                padding: 2px 5px;
                font-weight: bold;
                border: none;
            """

    @staticmethod
    def get_main_window_style(theme="dark"):
        if theme == "dark":
            bg_color = AppStyles.DARK_BACKGROUND_MAIN
            text_color = AppStyles.DARK_TEXT_PRIMARY
            border_color = AppStyles.DARK_BORDER_SECONDARY
            tab_bg = AppStyles.DARK_BACKGROUND_CONTROLS
            tab_selected_bg = AppStyles.ACCENT_COLOR_DARK
            header_bg = AppStyles.DARK_BACKGROUND_MAIN
        else:
            bg_color = AppStyles.LIGHT_BACKGROUND_MAIN
            text_color = AppStyles.LIGHT_TEXT_PRIMARY
            border_color = AppStyles.LIGHT_BORDER_PRIMARY
            tab_bg = AppStyles.LIGHT_BACKGROUND_HOVER
            tab_selected_bg = AppStyles.ACCENT_COLOR_LIGHT
            header_bg = AppStyles.LIGHT_BACKGROUND_HOVER

        return f"""
            QMainWindow, QWidget {{ /* QWidget dla tła dialogów itp. jeśli nie mają własnego stylu */
                background-color: {bg_color};
                color: {text_color};
            }}
            QStatusBar {{
                background-color: {header_bg}; /* Dopasowanie do nagłówków */
                color: {text_color};
                border-top: 1px solid {border_color};
            }}
            QMenuBar {{
                background-color: {header_bg};
                color: {text_color};
            }}
            QMenuBar::item:selected {{
                background-color: {AppStyles.DARK_BACKGROUND_HOVER if theme == 'dark' else AppStyles.LIGHT_BACKGROUND_HOVER};
            }}
            QMenu {{
                background-color: {tab_bg};
                color: {text_color};
                border: 1px solid {border_color};
            }}
            QMenu::item:selected {{
                background-color: {tab_selected_bg};
            }}

            /* Style dla QSplitter handle */
            QSplitter::handle {{
                background-color: {bg_color}; /* Kolor tła uchwytu */
                border: 1px solid {border_color}; /* Obramowanie uchwytu */
            }}
            QSplitter::handle:horizontal {{
                width: 1px; /* Cieńszy splitter */
            }}
            QSplitter::handle:vertical {{
                height: 1px; /* Cieńszy splitter */
            }}
            QSplitter::handle:pressed {{
                background-color: {tab_selected_bg}; /* Kolor uchwytu podczas przeciągania */
            }}

            QTabWidget::pane {{
                border-top: 1px solid {border_color};
                background-color: {bg_color}; /* Tło obszaru zakładek */
            }}
            QTabBar::tab {{
                background-color: {tab_bg};
                color: {text_color};
                border: 1px solid {border_color};
                border-bottom: none; /* Usuń dolną krawędź dla "wtopienia" w pane */
                padding: 5px 12px;
                margin-right: 1px;
                border-top-left-radius: {AppStyles.BORDER_RADIUS};
                border-top-right-radius: {AppStyles.BORDER_RADIUS};
            }}
            QTabBar::tab:selected {{
                background-color: {tab_selected_bg};
                color: {'white' if theme == 'dark' else AppStyles.LIGHT_BACKGROUND_CONTROLS};
            }}
            QTabBar::tab:!selected {{
                /* margin-top: 2px; */ /* Usunięte dla gładszego przejścia */
                background-color: {bg_color if theme == 'dark' else AppStyles.LIGHT_BACKGROUND_HOVER};
            }}
            QTabBar::tab:hover:!selected {{
                background-color: {AppStyles.DARK_BACKGROUND_HOVER if theme == 'dark' else AppStyles.LIGHT_BACKGROUND_HOVER};
            }}
        """

    @staticmethod
    def get_dialog_style(theme="dark"):
        # Styl dialogu dziedziczy kolory z QWidget z get_main_window_style
        # Można tu dodać specyficzne rzeczy dla QDialog jeśli potrzeba,
        # ale obecna struktura powinna już nadać im bazowy wygląd.
        # Poniżej przykład jak można by rozbudować, ale najpierw sprawdź efekt dziedziczenia.

        main_bg = AppStyles.DARK_BACKGROUND_MAIN if theme == "dark" else AppStyles.LIGHT_BACKGROUND_MAIN
        control_bg = AppStyles.DARK_BACKGROUND_CONTROLS if theme == "dark" else AppStyles.LIGHT_BACKGROUND_CONTROLS
        text_color = AppStyles.DARK_TEXT_PRIMARY if theme == "dark" else AppStyles.LIGHT_TEXT_PRIMARY
        border_color_secondary = AppStyles.DARK_BORDER_SECONDARY if theme == "dark" else AppStyles.LIGHT_BORDER_PRIMARY
        accent_color = AppStyles.ACCENT_COLOR_DARK if theme == "dark" else AppStyles.ACCENT_COLOR_LIGHT

        return f"""
            QDialog {{
                background-color: {main_bg}; /* Główne tło dialogu */
                color: {text_color};
            }}
            QGroupBox {{
                background-color: {main_bg}; /* Tło groupboxa, może być nieco jaśniejsze/ciemniejsze */
                color: {text_color};
                border: 1px solid {border_color_secondary};
                border-radius: {AppStyles.BORDER_RADIUS};
                margin-top: 10px; /* Odstęp dla tytułu */
                padding: 10px; /* Wewnętrzny padding */
            }}
            QGroupBox::title {{
                subcontrol-origin: margin;
                subcontrol-position: top left;
                left: 10px;
                padding: 0px 5px 0px 5px; /* Padding tytułu */
                color: {accent_color}; /* Kolor akcentu dla tytułu */
                font-weight: bold;
                background-color: {main_bg}; /* Tło tytułu takie samo jak dialogu */
            }}
            QLabel {{ /* Ogólne etykiety w dialogu */
                color: {text_color};
                background-color: transparent;
                padding: {AppStyles.CONTROL_PADDING};
            }}
            /* Style dla QRadioButton, QFontComboBox, QSpinBox, QTextEdit, QScrollBar 
               powinny być dziedziczone lub można je tu zdefiniować/nadpisać */
        """

    @staticmethod
    def get_dialog_style(theme="dark"):
        main_bg = AppStyles.DARK_BACKGROUND_MAIN if theme == "dark" else AppStyles.LIGHT_BACKGROUND_MAIN
        text_color = AppStyles.DARK_TEXT_PRIMARY if theme == "dark" else AppStyles.LIGHT_TEXT_PRIMARY
        border_color = AppStyles.DARK_BORDER_SECONDARY if theme == "dark" else AppStyles.LIGHT_BORDER_PRIMARY  # Użyjemy tego dla ramki

        return f"""
            /* Ogólny styl dla QDialog, jeśli nie ma bardziej specyficznego */
            QDialog {{
                background-color: {main_bg};
                color: {text_color};
            }}

            /* Styl specyficzny dla DigitSelectionDialogInstance */
            QDialog#DigitSelectionDialogInstance {{
                background-color: {main_bg}; /* Użyj tego samego tła co inne dialogi */
                color: {text_color};
                border: 1px solid {border_color}; /* Standardowa, subtelna ramka */
                border-radius: {AppStyles.BORDER_RADIUS};
            }}

            /* Poniższe style dla elementów WEWNĄTRZ DigitSelectionDialogInstance */
            /* mogą być potrzebne, jeśli dziedziczenie nie wystarcza lub chcesz innego wyglądu */
            /* Na razie zakładamy, że przyciski będą stylizowane indywidualnie w apply_dialog_theme dialogu */

            /* Ogólne style dla QGroupBox i QLabel w dialogach, jeśli DigitSelectionDialog ich użyje */
            /* lub jeśli chcesz je zdefiniować globalnie dla wszystkich QDialog */
            QDialog QGroupBox {{ /* Jeśli DigitSelectionDialog miałby GroupBoxy */
                background-color: {AppStyles.DARK_BACKGROUND_CONTROLS if theme == "dark" else AppStyles.LIGHT_BACKGROUND_CONTROLS};
                color: {text_color};
                border: 1px solid {border_color};
                border-radius: {AppStyles.BORDER_RADIUS};
                margin-top: 10px;
                padding: 10px;
            }}
            QDialog QGroupBox::title {{
                subcontrol-origin: margin;
                subcontrol-position: top left;
                left: 10px;
                padding: 0px 5px 0px 5px;
                color: {AppStyles.ACCENT_COLOR_DARK if theme == "dark" else AppStyles.ACCENT_COLOR_LIGHT};
                background-color: {AppStyles.DARK_BACKGROUND_CONTROLS if theme == "dark" else AppStyles.LIGHT_BACKGROUND_CONTROLS};
            }}
            QDialog QLabel {{
                color: {text_color};
                background-color: transparent; 
                padding: {AppStyles.CONTROL_PADDING};
            }}
        """

    SMALL_BUTTON_PADDING = "2px 5px"  # Mniejszy padding

    @staticmethod
    def get_small_button_style(theme="dark"):  # Nowa metoda
        # Podobna do get_button_style, ale używa SMALL_BUTTON_PADDING
        if theme == "dark":
            return f"""
            QPushButton {{
                background-color: {AppStyles.BUTTON_BLUE_BACKGROUND};
                color: {AppStyles.BUTTON_BLUE_TEXT_COLOR};
                border: 1px solid {AppStyles.BUTTON_BLUE_BORDER};
                padding: {AppStyles.SMALL_BUTTON_PADDING if hasattr(AppStyles, 'SMALL_BUTTON_PADDING') else '2px 5px'};
                border-radius: {AppStyles.BORDER_RADIUS};
            }}
            QPushButton:hover {{
                background-color: {AppStyles.BUTTON_BLUE_HOVER_BG};
            }}
            QPushButton:pressed {{
                background-color: {AppStyles.BUTTON_BLUE_PRESSED_BG};
            }}
            QPushButton:disabled {{
                background-color: #c0c0c0;
                color: #808080;
                border-color: #a0a0a0;
            }}
        """
        else:
            return f"""
            QPushButton {{
                background-color: {AppStyles.BUTTON_BLUE_BACKGROUND};
                color: {AppStyles.BUTTON_BLUE_TEXT_COLOR};
                border: 1px solid {AppStyles.BUTTON_BLUE_BORDER};
                padding: {AppStyles.SMALL_BUTTON_PADDING if hasattr(AppStyles, 'SMALL_BUTTON_PADDING') else '2px 5px'};
                border-radius: {AppStyles.BORDER_RADIUS};
            }}
            QPushButton:hover {{
                background-color: {AppStyles.BUTTON_BLUE_HOVER_BG};
            }}
            QPushButton:pressed {{
                background-color: {AppStyles.BUTTON_BLUE_PRESSED_BG};
            }}
            QPushButton:disabled {{
                background-color: #c0c0c0;
                color: #808080;
                border-color: #a0a0a0;
            }}
        """

    @staticmethod
    def get_tab_widget_style(theme="dark"):
        """Zwraca styl dla QTabWidget i QTabBar zgodny z motywem."""
        main_bg = AppStyles.DARK_BACKGROUND_MAIN if theme == "dark" else AppStyles.LIGHT_BACKGROUND_MAIN
        control_bg = AppStyles.DARK_BACKGROUND_CONTROLS if theme == "dark" else AppStyles.LIGHT_BACKGROUND_CONTROLS
        text_color = AppStyles.DARK_TEXT_PRIMARY if theme == "dark" else AppStyles.LIGHT_TEXT_PRIMARY
        border_color = AppStyles.DARK_BORDER_SECONDARY if theme == "dark" else AppStyles.LIGHT_BORDER_PRIMARY
        accent_color = AppStyles.ACCENT_COLOR_DARK if theme == "dark" else AppStyles.ACCENT_COLOR_LIGHT
        tab_bar_bg = control_bg if theme == "dark" else AppStyles.LIGHT_BACKGROUND_HOVER
        tab_pane_bg = control_bg

        return f"""
                QTabWidget::pane {{
                    border: 1px solid {border_color};
                    border-top: none;
                    background-color: {tab_pane_bg};
                    border-bottom-left-radius: {AppStyles.BORDER_RADIUS};
                    border-bottom-right-radius: {AppStyles.BORDER_RADIUS};
                }}
                QTabBar::tab {{
                    background-color: {tab_bar_bg};
                    color: {text_color};
                    border: 1px solid {border_color};
                    border-bottom: none; 
                    padding: 6px 12px;
                    margin-right: 2px;
                    border-top-left-radius: {AppStyles.BORDER_RADIUS};
                    border-top-right-radius: {AppStyles.BORDER_RADIUS};
                }}
                QTabBar::tab:selected {{
                    background-color: {accent_color};
                    color: {'white' if theme == "dark" else 'white'};
                }}
                QTabBar::tab:!selected:hover {{
                    background-color: {AppStyles.DARK_BACKGROUND_HOVER if theme == "dark" else AppStyles.LIGHT_BACKGROUND_HOVER};
                }}
            """
