# config.py

import configparser
import os
from debug_utils import log_error

# Utworzenie parsera i zdefiniowanie ścieżki do pliku
config = configparser.ConfigParser()
config_file_path = 'config.ini'

# Sprawdzenie, czy plik konfiguracyjny istnieje
if not os.path.exists(config_file_path):
    raise FileNotFoundError(f"Krytyczny błąd: Plik konfiguracyjny '{config_file_path}' nie został znaleziony. Aplikacja nie może zostać uruchomiona.")

config.read(config_file_path)

# Przygotowanie słownika DATABASE_CONFIG dla db_connector.py
try:
    DATABASE_CONFIG = dict(config.items('database'))
except configparser.NoSectionError:
    log_error("Błąd krytyczny: Sekcja [database] nie została znaleziona w pliku config.ini.")
    DATABASE_CONFIG = {}

# Przygotowanie słownika SQL_OBJECTS z nazwami obiektów bazy danych
try:
    SQL_OBJECTS = {key: value for key, value in config.items('sql_objects')}
except configparser.NoSectionError:
    log_error("Błąd krytyczny: Sekcja [sql_objects] nie została znaleziona w pliku config.ini.")
    SQL_OBJECTS = {}
