To bardzo mÄ…dre podejÅ›cie. W Å›wiecie integracji nazywamy to "Smoke Test" (test dymny) lub "Ping".
Zanim cokolwiek wyÅ›lemy (POST), sprawdÅºmy, czy drzwi sÄ… otwarte (GET).
Oto bezpieczny skrypt w Pythonie, ktÃ³ry nie zmienia Å¼adnych danych. Robi tylko dwie rzeczy:
 * PrÃ³buje siÄ™ zalogowaÄ‡ (sprawdza Client ID/Secret).
 * PrÃ³buje pobraÄ‡ listÄ™ pierwszego z brzegu pracownika (sprawdza uprawnienia/Scope).
Skrypt Testowy (Connection Tester)
Zapisz to jako test_connection.py.
import requests
import json
import sys

# --- TWOJE DANE KONFIGURACYJNE ---
CLIENT_ID = "twoj_client_id"
CLIENT_SECRET = "twoj_client_secret"
# PamiÄ™taj: Pilot (test) czy Produkcja?
PORTAL_URL = "https://twoja-firma-pilot.csod.com" 
# Scope 'employee:read' jest najbezpieczniejszy do testÃ³w
SCOPE = "employee:read" 

def test_connection():
    print("ğŸ”Œ Rozpoczynam test poÅ‚Ä…czenia z Cornerstone...")
    
    # 1. TEST AUTORYZACJI (Pobranie tokena)
    token_url = f"{PORTAL_URL}/services/api/oauth2/token"
    payload = {
        "grant_type": "client_credentials",
        "client_id": CLIENT_ID,
        "client_secret": CLIENT_SECRET,
        "scope": SCOPE
    }
    
    try:
        auth_response = requests.post(token_url, data=payload)
        
        if auth_response.status_code == 200:
            print("âœ… KROK 1: Autoryzacja udana! (Token pobrany)")
            token = auth_response.json()["access_token"]
        elif auth_response.status_code == 401:
            print("âŒ BÅÄ„D: NieprawidÅ‚owe Client ID lub Secret.")
            return
        else:
            print(f"âŒ BÅÄ„D AUTORYZACJI: Kod {auth_response.status_code}")
            print(auth_response.text)
            return

    except Exception as e:
        print(f"âŒ BÅÄ„D KRYTYCZNY: Nie moÅ¼na poÅ‚Ä…czyÄ‡ siÄ™ z serwerem. SprawdÅº URL. {e}")
        return

    # 2. TEST ODCZYTU DANYCH (Ping)
    # Pobieramy tylko 1 rekord (limit=1), Å¼eby byÅ‚o szybko
    # UÅ¼ywamy endpointu pracownikÃ³w, bo tam zawsze sÄ… jakieÅ› dane
    test_endpoint = f"{PORTAL_URL}/services/api/x/users/v1/employees?limit=1"
    
    headers = {
        "Authorization": f"Bearer {token}",
        "Content-Type": "application/json"
    }
    
    try:
        read_response = requests.get(test_endpoint, headers=headers)
        
        if read_response.status_code == 200:
            print("âœ… KROK 2: Odczyt danych udany! (PoÅ‚Ä…czenie stabilne)")
            data = read_response.json()
            print("\n--- PrzykÅ‚adowe dane z serwera ---")
            # WyÅ›wietlamy tylko kawaÅ‚ek odpowiedzi dla potwierdzenia
            print(json.dumps(data, indent=4, ensure_ascii=False))
            print("----------------------------------")
            print("ğŸš€ JesteÅ› gotowy do wysyÅ‚ania danych (POST).")
            
        elif read_response.status_code == 403:
            print("âš ï¸ OSTRZEÅ»ENIE: Token poprawny, ale brak uprawnieÅ„ (Scope).")
            print("SprawdÅº w CSOD API Management, czy zaznaczyÅ‚eÅ› 'employee:read'.")
            
        else:
            print(f"âŒ BÅÄ„D ODCZYTU: Kod {read_response.status_code}")
            print(read_response.text)

    except Exception as e:
        print(f"âŒ BÅ‚Ä…d podczas odpytywania API: {e}")

if __name__ == "__main__":
    test_connection()

Jak czytaÄ‡ wyniki?
Uruchom skrypt. Oto co oznaczajÄ… komunikaty:
 * Kod 200 (OK): Wszystko dziaÅ‚a. Masz zielone Å›wiatÅ‚o, by uÅ¼yÄ‡ skryptu do stawiania celÃ³w.
 * Kod 401 (Unauthorized):
   * Masz literÃ³wkÄ™ w CLIENT_ID lub CLIENT_SECRET.
   * TwÃ³j klucz (Secret) wygasÅ‚ (one majÄ… datÄ™ waÅ¼noÅ›ci!).
 * Kod 403 (Forbidden) - NajczÄ™stszy problem:
   * ZalogowaÅ‚eÅ› siÄ™ poprawnie, ale Twoja aplikacja nie ma prawa czytaÄ‡ danych.
   * RozwiÄ…zanie: WejdÅº w panel admina CSOD -> API Management -> Edytuj swojÄ… aplikacjÄ™ -> ZakÅ‚adka "Scopes" -> Zaznacz ptaszkiem employee:read (lub performance:goals:create dla celÃ³w).
 * Kod 404 (Not Found):
   * Prawdopodobnie masz zÅ‚y adres URL (PORTAL_URL).
   * SprawdÅº, czy nie pomyliÅ‚eÅ› corp.csod.com z pilot.csod.com.
 * BÅ‚Ä…d poÅ‚Ä…czenia (Connection Error):
   * MoÅ¼e Twoja firma ma firewall, ktÃ³ry blokuje wyjÅ›cia na Å›wiat?
   * BÅ‚Ä™dny adres URL (np. https:// wpisane dwa razy).
Uruchom ten skrypt i daj znaÄ‡, jaki kod bÅ‚Ä™du (lub sukcesu) otrzymaÅ‚eÅ›!
